machine:
  environment:
    PATH: ${HOME}/erlang/bin:${PATH}

dependencies:
  pre:
    - bash ./circle/install-erlang.sh
    - bash ./circle/install-rebar.sh
    - bash ./circle/install-elvis.sh
  override:
    - make
    - make plt
  cache_directories:
    - ~/erlang
    - ~/dialyzer
    - deps

test:
  override:
    - make
    - make lint
    - make tests
    - make rel 
    - make docs
    - make package
  post:
    - cp package/packages/*.deb ${CIRCLE_ARTIFACTS}
    - bash ./circle/copy-docs.sh
